language: go
dist: trusty
sudo: true
matrix:
  include:
  - os: linux
    env:
    - GIMME_OS=linux
    - GIMME_ARCH=amd64
    go: 1.8
  - os: osx
    env:
    - GIMME_OS=darwin
    - GIMME_ARCH=amd64
    go: 1.8
before_install:
- git fetch --tags
- go get golang.org/x/tools/cmd/stringer
- go get github.com/mattn/goveralls
script:
- go get ./...
- $HOME/gopath/bin/goveralls -service=travis-ci
- make test
- make dist
before_deploy:
- tar -cvzf remoteRotator-v$TRAVIS_TAG-$GIMME_OS-$GIMME_ARCH.tar.gz remoteRotator
deploy:
  provider: releases
  api_key:
    secure: OhP5sEYJqU5sRHCIPNz0pGGmRpE9BoRpygTq9qAMJpzjBX/0oak62SvSh+y4Imv81r6K1Jc7qMz3ZmGlJOvY2xeipHPfWZtjI/4RszQSmwDhNzEHGZQ5WiMaHT2p80F9PJgLdSFsvAawot6+VopqlpsvEOpgfocyX9hCgfDveRDB8mpN+NrT4+egEGKu06wT2ADDQSVaGIc1LloLp4uEeNJo9wFLGWDnThPDaQ1oYZXiir9NZjxSjDKXyFDIhAki1WdbM1F9ea/lHZlJHJpUMKY8AA7INNgeyOsHjf3r1DCsdp3X7UKNbkv5KSpSwtURM5frdiPg+S/i/sb/ya9XICXFJAx3zbBKvCecZ4if8bUy82QBZSjlT5L8QJsTi8oHjQKC6m/dQh2lDxBZFbpWOtoTYCBlkexW8NyIuKmx5vsR1arsJn2lJZmii5G5+FwvyDftpbTpc/4NlcVcjIs/rzCGG8TQDhN8rxX+utJ1vs2G5al6CJWVXupqiNz8+S35ciqYhTyuIXeYG5MffEfBM45tzA6F2WQCsutoYatuo2SV5cLQzbCSeWO6LNsfGSWlyw6jC/Ixg6erFpCXbC/3gkbGH7oYAMEVaoSlhMm4TgdLcn+jnaF7z2wdY0YhHioekWATtbLOy1Cwcy5SYGPKuoY9rk+wlsjAPmV6PoIfYQ8=
  file: remoteRotator-v$TRAVIS_TAG-$GIMME_OS-$GIMME_ARCH.tar.gz
  skip_cleanup: true
  on:
    repo: dh1tw/remoteRotator
    tags: true
    draft: true
    go: 1.8
  password:
    secure: JT9RgbWnH+xGT5HWiYSus07rPBtTB9zWbxNoj6XfPrGzC9H1BitquCT1j1QYetejMYp9+DKaouthDpt2m6hynWWcWC7YhR3Bx8cFz3X6DOsYMDp0i3QPYDVxLC4RJcQSDBXgGLsc6jHVUikA45XxrZby2aJ7KWdlpU8fMZQ5UaC9Cqp/+R5AOEKWq/1VVV4Rym0P9yq4Thq49nkrTkI/ovO8pCfdy60Rk3to/Nsl621Yf+RS5ahEDgBCJLGcCvfnT46AIgxkhDol6KpzEZuTZ5v+HNR1TNrB6fvXDnxIn8QWMO03mggLpsw77/kOpFpZR2k5lSf2foovoHKm1L0yDNRDDUK6VQS0EtBfRwl639JNpg8vaoYIVNq+oI1hq0O40ABeHyPwrE/C0BC4Yb/K6YRln35aDUinrY6SBkt3blC5Ufz0gvj/KaL/2+4sFYUMxXJ8nOzeJXnjGoxNFfP4i0LMnuT4BDtTU4l0w2EMq/NmTAPiiDM5Whb8ajoPVDK3tcF0++vPM+eXAeG3MSZa7+4NU/o6iin9UKDZuINavePmaBKCG3YyIhScCv0YioM3ZupycU37VrfN3kAyVJpdAoOQ0Q4QAgSbbym2Xb2+LiT8qltP6MpkC9CO27H98wkLqA81gDQxoLjbtmD2lfz3mX89VWHFWsNduxivOAf4VdQ=
