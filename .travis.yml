language: go
dist: trusty
sudo: true
matrix:
  include:
  - os: linux
    env:
    - GIMME_OS=linux
    - GIMME_ARCH=amd64
    go: 1.8
  - os: osx
    env:
    - GIMME_OS=darwin
    - GIMME_ARCH=amd64
    go: 1.8
before_install:
- git fetch --tags
- go get golang.org/x/tools/cmd/stringer
- go get github.com/mattn/goveralls
script:
- go get ./...
- $HOME/gopath/bin/goveralls -service=travis-ci
- make test
- make dist
before_deploy:
- tar -cvzf remoteRotator-v$TRAVIS_TAG-$GIMME_OS-$GIMME_ARCH.tar.gz remoteRotator
deploy:
  provider: releases
  api_key:
    secure: uqjnMKKXq+uqO3LG5d7nNSOLtPqw90eJ04get/Mpcp8PT+fae7EIlpzba6G2GxqlsvnEoqG5ti78EIkc0/315CxK/NxheOPbOJXjWRJJSh2wTk3TYaFc626z2sQ6XBeGXv8Ikc5z80t5rHghhFv8IEX+qvNzamJsd3UMLh/tPNV9p14UAsgHv01CqEwqOJCFU0yhsiw6Dx4BJ36KRgateOMj/JPiQEbeqK/oQl5akkocDv9H1MgnePmovuJwXN/0tO2ZCtM+JMU0+ed5UZMlVszbmk7JAMSRS4nztfmgz0sozqT9utf21svB6RGBxehxIRle073HIRF+ZI5CF8GNUCu9aksG2eXeqXzXkiffsMJDqH/5OURwyG/m/1YwiHhDqDYOfrszg210wbJL9KEiuoxQT4xAGkgdcU/XliGBJrlhkEKvcPaNSqtVBc9OTuyTBStTGuvuUWEMuGaZWufKVI4bLkSVWzOjj5gAl54lpj6IiSNpxwAE5ClYuOOpZvU7CY5ZJj3/8V6eOBd08WFUI80D3ror9CmVB45tFf0lpxIoM31tDzmEd7XVE4+/rM5gW/LpZv50zNHqQU2CvbOArJ5w7Gc73vstENcs03n0KI0Q1XiC6rHf2mWsSypfGbsjMwETWxK/S+lEtZgUxj14qZP+K8VbZeE+KDQ28quf7L4=
  file: remoteRotator-v$TRAVIS_TAG-$GIMME_OS-$GIMME_ARCH.tar.gz
  skip_cleanup: true
  on:
    repo: dh1tw/remoteRotator
    tags: true
    draft: true
    go: 1.8